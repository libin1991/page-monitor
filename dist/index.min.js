!function(t){function e(e){var n=r.Net.declareResLoadSucc,o=r.Net.declareResLoadFail,a="_resourceLoadSucc",i="_resourceLoadFail",c=e?a:i,u=e?n:o;if(t[c]){var d=t[c];t[c]=function(t){d(t),u(t)}}else t[c]=u}var n="//log.waimai.baidu.com/static/exceptionjs.gif?",o=null,r={},a={type:function(t){return Object.prototype.toString.call(t)},isArr:function(t){return"[object Array]"==a.type(t)},isReg:function(t){return"[object RegExp]"==a.type(t)},isNum:function(t){return"[object Number]"==a.type(t)}};!function(t){function e(t,e){var n=this,o=function(){n.globalData.trace_code=n.getTraceCode(),window.removeEventListener("DOMContentLoaded",o)};if(!t)throw new Error("Reportor must have reportUrl");if(!e.app||!e.channel||!e.platform)throw new Error("Global report data fragmentary");n.globalData=e,n.reportUrl=t,window.addEventListener("DOMContentLoaded",o)}e.prototype={getTraceCode:function(){for(var t=document.body.childNodes,e="",n=t.length-1;n>=0;n--)if(t[n].nodeType==document.COMMENT_NODE){e=t[n].textContent;break}return e},filterFalsely:function(t){var e=[];return t.forEach(function(t,n){t[1]&&e.push(t)}),e},format:function(t){var e=this,n=[];if(a.isArr(t))t.forEach(function(t,e){2==t.length&&(a.isNum(t[1])?t[1]=Math.max(0,t[1].toFixed(2)):t[1]=encodeURIComponent(t[1]),n.push(t))});else{t=Object(t);for(var o in t)if(t.hasOwnProperty(o)){var r=t[o];n.push([o,r])}n=e.format(n)}return n},report:function(t,e){var n=this;t=n.format(Object.assign({},n.globalData,t)),e&&(t=n.filterFalsely(t)),n.send(t.reduce(function(t,e){return t+=e.join("=")+"&"},""))},send:function(t){var e=this,n=new Image,o=e.reportUrl;n.onload=function(){n=null},n.src=o+t}},t.Reportor=e}(r),function(t){var e=function(t){t=Object.assign({},t),o.report(t,!0)},n={init:function(){var t=this,e=function(){"complete"==document.readyState&&(t.initjQueryAjaxHook(),document.removeEventListener("readystatechange",e))};"complete"==document.readyState?t.initjQueryAjaxHook():document.addEventListener("readystatechange",e)},initjQueryAjaxHook:function(){jQuery&&$(document).ajaxError(function(t,n,o,r){e({url:o.url,purl:location.href,err_status:n.status,err_txt:n.statusText})})},declareResLoadFail:function(t){t instanceof HTMLElement&&e({url:t.src||t.href,purl:location.href,err_status:"404",err_msg:"Not Found"})},declareResLoadSucc:function(t){}};t.Net=n}(r),function(t){var e=window.performance.timing,n=["script","link","xmlhttprequest"],r=["resource","measure"],i=1e3,c=function(t){t=Object.assign({},t),o.report(t,!1)},u={init:function(){var t=this,e=function(){"complete"==document.readyState&&(t.initObserve(),document.removeEventListener("readystatechange",e))};"complete"==document.readyState?t.initObserve():document.addEventListener("readystatechange",e)},initObserve:function(){if(window.PerformanceObserver){var t=new window.PerformanceObserver(function(t){for(var e=t.getEntriesByType("resource"),o=0;o<e.length;o++){var r=e[o],a=r.duration;/log\.waimai\.baidu\.com/.test(r.name)||n.indexOf(r.initiatorType)!=-1&&a>i&&c({p_lookup:r.domainLookupEnd-r.domainLookupStart,p_tcp:r.connectEnd-r.connectStart,p_ssl:r.secureConnectionStart>0?r.connectEnd-r.secureConnectionStart:0,p_ttfb:r.responseStart-r.requestStart,p_download:r.responseEnd-r.responseStart,p_to_download:a,p_to_connect:r.connectEnd-r.fetchStart,url:e[o].name})}});t.observe({entryTypes:r})}}},d={validate:function(t){var e=!1;return a.isArr(t)?t.some(function(t,n){if(a.isReg(t)&&t.test(location.href))return e=!0,!0}):e=t==location.href,e},reportDocTiming:function(){c({p_nav:e.fetchStart-e.navigationStart,p_unload:e.unloadEventEnd-e.unloadEventStart,p_lookup:e.domainLookupEnd-e.domainLookupStart,p_tcp:e.connectEnd-e.connectStart,p_ssl:e.secureConnectionStart>0?e.connectEnd-e.secureConnectionStart:0,p_ttfb:e.responseStart-e.requestStart,p_download:e.responseEnd-e.responseStart,p_to_download:e.responseEnd-e.navigationStart,p_to_connect:e.connectEnd-e.navigationStart,ext_req_part:1})},reportDocResourceTiming:function(){c({p_dom_ready:e.domComplete-e.domLoading,p_to_dom_ready:e.domComplete-e.navigationStart,p_dom_loaded:e.loadEventEnd-e.loadEventStart,p_to_dom_loaded:e.loadEventEnd-e.navigationStart,ext_req_part:2})},init:function(t){var e=this,n=function(){"complete"==document.readyState&&setTimeout(function(){e.reportDocResourceTiming(),document.removeEventListener("readystatechange",n)},100)};this.validate(t)&&(e.reportDocTiming(),"complete"==document.readyState?e.reportDocResourceTiming():document.addEventListener("readystatechange",n))}};t.Perf={init:function(t){d.init(t),u.init()}}}(r),function(t){var e=function(t){t=Object.assign({},t),o.report(t,!0)},n={init:function(){window.addEventListener("error",function(t){console.log("error:",arguments),e({purl:location.href,url:t.filename,err_status:401,err_txt:t.message})})}};t.Runtime=n}(r),t.BDWMMonitor={init:function(t,i,c){a.isArr(t)&&t.length&&(o=new r.Reportor(n,{platform:i.platform,app:i.app,channel:i.channel,wid:i.wid,city_id:i.city_id,protocol:location.protocol.substr(0,location.protocol.length-1)}),t.indexOf("net")>-1&&(r.Net.init(),e(!0),e(!1)),t.indexOf("perf")>-1&&r.Perf.init(c),t.indexOf("runtime")>-1&&r.Runtime.init())}}}(window);